# mod.yml - S3文件上传示例配置
# 演示如何配置MOD框架的S3文件上传功能

# 应用基本信息
app:
  name: "s3-upload-demo"
  display_name: "S3文件上传演示"
  description: "演示MOD框架S3文件上传功能的示例应用"
  version: "1.0.0"
  service_path_prefix: "/services"
  token_keys:
    - "Authorization"
    - "X-API-Key"

  # 服务器配置
  host: "0.0.0.0"
  port: 8080
  read_timeout: "30s"
  write_timeout: "30s"
  idle_timeout: "60s"
  body_limit: "100MB"

# 文件上传配置（支持多种存储后端）
# 优先级顺序：S3 > OSS > Local
file_upload:
  # Amazon S3配置（最高优先级）
  s3:
    enabled: true                     # 启用S3上传
    bucket: "my-s3-bucket"            # S3存储桶名称
    region: "us-west-2"               # AWS区域
    access_key: "AKIAIOSFODNN7EXAMPLE" # AWS访问密钥ID
    secret_key: "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" # AWS秘密访问密钥
    endpoint: ""                      # 自定义端点（用于MinIO等S3兼容存储）

  # MinIO配置示例（使用S3兼容接口）
  # s3:
  #   enabled: true
  #   bucket: "my-minio-bucket"
  #   region: "us-east-1"
  #   access_key: "minioadmin"
  #   secret_key: "minioadmin"
  #   endpoint: "http://localhost:9000"  # MinIO服务端点

  # 本地存储配置（最低优先级，作为备选）
  local:
    enabled: true
    upload_dir: "./uploads"
    max_size: "10MB"
    allowed_types:
      - "image/jpeg"
      - "image/png"
      - "image/gif"
      - "application/pdf"
      - "text/plain"
    allowed_exts:
      - ".jpg"
      - ".jpeg"
      - ".png"
      - ".gif"
      - ".pdf"
      - ".txt"
    keep_original_name: false
    auto_create_dir: true
    date_sub_dir: true

# 静态资源挂载配置
static_mounts:
  - url_prefix: "/uploads"
    local_path: "./uploads"
    browseable: true
    index_file: ""

# 日志配置
logging:
  console:
    enabled: true
    level: "info"

  file:
    enabled: true
    path: "./logs/app.log"
    max_size: "100MB"
    max_backups: 10
    max_age: "30d"
    compress: true